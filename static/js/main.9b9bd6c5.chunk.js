(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[2],{14:function(e,t,r){"use strict";r.d(t,"a",(function(){return j})),r.d(t,"b",(function(){return l}));var n=r(4),c=(r(27),r(18)),a=r.n(c),u=r(23),s=r(20),o=r.n(s);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var i=function(e){o.a.defaults.headers.common.Authorization="Bearer ".concat(e)},b=function(){o.a.defaults.headers.common.Authorization=""},j={register:function(e){return function(){var t=Object(u.a)(a.a.mark((function t(r){var c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(n.a.registerRequest()),t.prev=1,t.next=4,o.a.post("/users/signup",e);case 4:c=t.sent,i(c.data.token),r(n.a.registerSuccess(c.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),r(n.a.registerError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},login:function(e){return function(){var t=Object(u.a)(a.a.mark((function t(r){var c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(n.a.loginRequest()),t.prev=1,t.next=4,o.a.post("/users/login",e);case 4:c=t.sent,i(c.data.token),r(n.a.loginSuccess(c.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),r(n.a.logoutError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logOut:function(){return function(){var e=Object(u.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(n.a.logoutRequest()),e.prev=1,e.next=4,o.a.post("/users/logout");case 4:b(),t(n.a.logoutSuccess()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(n.a.logoutError(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(u.a)(a.a.mark((function e(t,r){var c,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r(),u=c.auth.token){e.next=3;break}return e.abrupt("return");case 3:return i(u),t(n.a.getCurrentUserRequest()),e.prev=5,e.next=8,o.a.get("/users/current");case 8:s=e.sent,t(n.a.getCurrentUserSuccess(s.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(n.a.getCurrentUserError(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,r){return e.apply(this,arguments)}}()}},l={getUserIn:function(e){return e.auth.isAuthenticated},getUserName:function(e){return e.auth.user.name}}},16:function(e,t,r){"use strict";var n=r(3),c=Object(n.b)("contacts/fetchContactsRequest"),a=Object(n.b)("contacts/fetchContactsSuccess"),u=Object(n.b)("contacts/fetchContactsError"),s=Object(n.b)("contacts/makeCardRequest"),o=Object(n.b)("contacts/makeCardSuccess"),i=Object(n.b)("contacts/makeCardError"),b=Object(n.b)("contacts/deleteCardRequest"),j=Object(n.b)("contacts/deleteCardSuccess"),l=Object(n.b)("contacts/deleteCardError"),O=Object(n.b)("contacts/filter");t.a={makeCardRequest:s,makeCardSuccess:o,makeCardError:i,deleteCardRequest:b,deleteCardError:l,deleteCardSuccess:j,filterValue:O,fetchContactsRequest:c,fetchContactsSuccess:a,fetchContactsError:u}},24:function(e,t,r){e.exports={link:"AppBar_link__3DGFJ",menu:"AppBar_menu__2zon3",AppBar:"AppBar_AppBar__10456"}},27:function(e,t,r){"use strict";var n,c,a,u,s=r(2),o=r(7),i=r(3),b=r(4),j={name:null,email:null},l=Object(i.c)(j,(n={},Object(s.a)(n,b.a.registerSuccess,(function(e,t){return t.payload.user})),Object(s.a)(n,b.a.loginSuccess,(function(e,t){return t.payload.user})),Object(s.a)(n,b.a.logoutSuccess,(function(){return j})),Object(s.a)(n,b.a.getCurrentUserSuccess,(function(e,t){return t.payload})),n)),O=Object(i.c)(j,(c={},Object(s.a)(c,b.a.registerSuccess,(function(e,t){return t.payload.token})),Object(s.a)(c,b.a.loginSuccess,(function(e,t){return t.payload.token})),Object(s.a)(c,b.a.logoutSuccess,(function(){return null})),c)),d=Object(i.c)(j,(a={},Object(s.a)(a,b.a.registerError,(function(e,t){return t.payload})),Object(s.a)(a,b.a.loginError,(function(e,t){return t.payload})),Object(s.a)(a,b.a.logoutError,(function(e,t){return t.payload})),Object(s.a)(a,b.a.getCurrentUserError,(function(e,t){return t.payload})),a)),f=Object(i.c)(!1,(u={},Object(s.a)(u,b.a.registerSuccess,(function(){return!0})),Object(s.a)(u,b.a.loginSuccess,(function(){return!0})),Object(s.a)(u,b.a.getCurrentUserSuccess,(function(){return!0})),Object(s.a)(u,b.a.registerError,(function(){return!1})),Object(s.a)(u,b.a.loginError,(function(){return!1})),Object(s.a)(u,b.a.getCurrentUserError,(function(){return!1})),Object(s.a)(u,b.a.logoutSuccess,(function(){return!1})),u));t.a=Object(o.b)({user:l,token:O,error:d,isAuthenticated:f})},30:function(e,t,r){e.exports={container:"UserMenu_container__1bijv",avatar:"UserMenu_avatar__1hXa6",name:"UserMenu_name__1BykE"}},33:function(e,t,r){e.exports={link:"AuthNav_link__4q3Kw"}},4:function(e,t,r){"use strict";var n=r(3),c=Object(n.b)("auth/registerRequest"),a=Object(n.b)("auth/registerSuccess"),u=Object(n.b)("auth/registerError"),s=Object(n.b)("auth/loginRequest"),o=Object(n.b)("auth/loginSuccess"),i=Object(n.b)("auth/loginError"),b=Object(n.b)("auth/logoutRequest"),j=Object(n.b)("auth/logoutSuccess"),l=Object(n.b)("auth/logoutError"),O=Object(n.b)("auth/getCurrentUserRequest"),d=Object(n.b)("auth/getCurrentUserSuccess"),f=Object(n.b)("auth/getCurrentUserError");t.a={registerRequest:c,registerSuccess:a,registerError:u,logoutRequest:b,logoutSuccess:j,logoutError:l,loginRequest:s,loginSuccess:o,loginError:i,getCurrentUserRequest:O,getCurrentUserSuccess:d,getCurrentUserError:f}},49:function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));r(0);var n=r(12),c=r(15),a=r(24),u=r.n(a),s=r(14),o=r.p+"static/media/avatar.664bc0bf.png",i=r(30),b=r.n(i),j=r(1),l={onLogout:s.a.logOut},O=Object(n.b)((function(e){return{name:s.b.getUserName(e),avatar:o}}),l)((function(e){var t=e.avatar,r=e.name,n=e.onLogout;return Object(j.jsxs)("div",{className:b.a.container,children:[Object(j.jsx)("img",{src:t,alt:"",width:"32",className:b.a.avatar}),Object(j.jsxs)("span",{className:b.a.name,children:["Welcome, ",r]}),Object(j.jsx)("button",{type:"button",onClick:n,children:"Logout"})]})})),d=r(33),f=r.n(d),p=function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)(c.b,{to:"/register",exact:!0,className:f.a.link,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(j.jsx)(c.b,{to:"/login",exact:!0,className:f.a.link,children:"\u041b\u043e\u0433\u0438\u043d"})]})},g=Object(n.b)((function(e){return{getUserIn:s.b.getUserIn(e)}}))((function(e){var t=e.getUserIn;return Object(j.jsxs)("div",{className:u.a.AppBar,children:[Object(j.jsxs)("div",{className:u.a.menu,children:[Object(j.jsx)(c.b,{to:"/",exact:!0,className:u.a.link,children:"Main"}),t&&Object(j.jsx)(c.b,{to:"/contacts",exact:!0,className:u.a.link,children:"Phonebook"})]}),Object(j.jsx)("div",{children:t?Object(j.jsx)(O,{}):Object(j.jsx)(p,{})})]})}))},53:function(e,t,r){e.exports={section:"src_section__nxvbv",title:"src_title__1CQxg"}},89:function(e,t,r){"use strict";r.r(t);var n,c,a,u=r(0),s=r.n(u),o=r(25),i=r.n(o),b=r(15),j=r(36),l=r(37),O=r(39),d=r(38),f=r(12),p=r(49),g=(r(53),r(6)),h=r(17),m=r(28),x=r(14),v=r(1),C=Object(f.b)((function(e){return{isAuthenticated:x.b.getUserIn(e)}}))((function(e){var t=e.component,r=e.isAuthenticated,n=e.redirectTo,c=Object(m.a)(e,["component","isAuthenticated","redirectTo"]);return Object(v.jsx)(g.b,Object(h.a)(Object(h.a)({},c),{},{render:function(e){return r?Object(v.jsx)(t,Object(h.a)({},e)):Object(v.jsx)(g.a,{to:n})}}))})),k=Object(f.b)((function(e){return{isAuthenticated:x.b.getUserIn(e)}}))((function(e){var t=e.component,r=e.isAuthenticated,n=e.redirectTo,c=Object(m.a)(e,["component","isAuthenticated","redirectTo"]);return Object(v.jsx)(g.b,Object(h.a)(Object(h.a)({},c),{},{render:function(e){return r&&c.restricted?Object(v.jsx)(g.a,{to:n}):Object(v.jsx)(t,Object(h.a)({},e))}}))})),S=Object(u.lazy)((function(){return r.e(0).then(r.bind(null,94))})),y=Object(u.lazy)((function(){return r.e(1).then(r.bind(null,95))})),E=Object(u.lazy)((function(){return r.e(3).then(r.bind(null,97))})),U=Object(u.lazy)((function(){return r.e(4).then(r.bind(null,96))})),_=function(e){Object(O.a)(r,e);var t=Object(d.a)(r);function r(){return Object(j.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(p.a,{}),Object(v.jsx)(u.Suspense,{fallback:Object(v.jsx)("h1",{children:"Loading..."}),children:Object(v.jsxs)(g.d,{children:[Object(v.jsx)(g.b,{exact:!0,path:"/",component:S}),Object(v.jsx)(k,{path:"/register",restricted:!0,component:U,redirectTo:"/contacts"}),Object(v.jsx)(k,{path:"/login",restricted:!0,component:y,redirectTo:"/contacts"}),Object(v.jsx)(C,{path:"/contacts",component:E,redirectTo:"/login"})]})})]})}}]),r}(u.Component),q={onGetCurrentUser:x.a.getCurrentUser},R=Object(f.b)(null,q)(_),A=r(29),w=r(3),N=r(19),B=(r(86),r(51)),z=r.n(B),T=r(2),I=r(7),M=r(16),L=M.a.makeCardRequest,G=M.a.makeCardSuccess,J=M.a.makeCardError,D=M.a.deleteCardRequest,F=M.a.deleteCardError,V=M.a.deleteCardSuccess,K=M.a.filterValue,P=M.a.fetchContactsRequest,Q=M.a.fetchContactsSuccess,W=M.a.fetchContactsError,X=Object(w.c)([],(n={},Object(T.a)(n,Q,(function(e,t){return t.payload})),Object(T.a)(n,G,(function(e,t){var r=t.payload;return[].concat(Object(A.a)(e),[r])})),Object(T.a)(n,V,(function(e,t){var r=t.payload;return e.filter((function(e){return e.id!==r}))})),n)),H=Object(w.c)(!1,(c={},Object(T.a)(c,P,(function(){return!0})),Object(T.a)(c,Q,(function(){return!1})),Object(T.a)(c,W,(function(){return!1})),Object(T.a)(c,L,(function(){return!0})),Object(T.a)(c,G,(function(){return!1})),Object(T.a)(c,J,(function(){return!1})),Object(T.a)(c,D,(function(){return!0})),Object(T.a)(c,V,(function(){return!1})),Object(T.a)(c,F,(function(){return!1})),c)),Y=Object(w.c)("",Object(T.a)({},K,(function(e,t){return t.payload}))),Z=Object(w.c)(null,(a={},Object(T.a)(a,J,(function(e,t){return t.payload})),Object(T.a)(a,F,(function(e,t){return t.payload})),Object(T.a)(a,W,(function(e,t){return t.payload})),a)),$=Object(I.b)({contacts:X,filter:Y,loading:H,error:Z}),ee=r(27),te=Object(A.a)(Object(w.d)({serializableCheck:{ignoredActions:[N.a,N.f,N.b,N.c,N.d,N.e]}})),re={key:"auth",storage:z.a,whitelist:["token"]},ne=Object(w.a)({reducer:{phonebook:$,auth:Object(N.g)(re,ee.a)},devTools:!1,middleware:te}),ce={store:ne,persistor:Object(N.h)(ne)},ae=r(52);i.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(f.a,{store:ce.store,children:Object(v.jsx)(ae.a,{loading:null,persistor:ce.persistor,children:Object(v.jsx)(b.a,{children:Object(v.jsx)(R,{})})})})}),document.getElementById("root"))}},[[89,5,6]]]);
//# sourceMappingURL=main.9b9bd6c5.chunk.js.map